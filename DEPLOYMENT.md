# DexBrain API Deployment Guide

## 🚀 Quick Deploy Options

### Option 1: Railway (Recommended for MVP)

**Why Railway:**
- ✅ Built-in PostgreSQL and Redis
- ✅ Simple GitHub integration  
- ✅ Auto-scaling
- ✅ $5-20/month starter cost

**Deploy Steps:**
```bash
# 1. Install Railway CLI
npm install -g @railway/cli

# 2. Login and initialize
railway login
cd backend
railway init

# 3. Add databases
railway add postgresql
railway add redis

# 4. Set environment variables
railway variables set API_HOST=0.0.0.0
railway variables set API_PORT=8080
railway variables set LOG_LEVEL=INFO

# 5. Deploy
railway up
```

**Custom Domain:**
```bash
# Add your domain
railway domain add api.dexteragent.com
```

### Option 2: DigitalOcean App Platform

**Why DigitalOcean:**
- ✅ Transparent pricing
- ✅ Great developer experience
- ✅ Built-in databases
- ✅ Easy scaling

**Deploy Steps:**
```bash
# 1. Install doctl
curl -sL https://github.com/digitalocean/doctl/releases/download/v1.94.0/doctl-1.94.0-linux-amd64.tar.gz | tar -xzv
sudo mv doctl /usr/local/bin

# 2. Authenticate
doctl auth init

# 3. Deploy using app spec
doctl apps create --spec .do/app.yaml
```

### Option 3: Render.com

**Why Render:**
- ✅ Free tier available
- ✅ Automatic deploys
- ✅ Built-in databases
- ✅ Good for testing

**Deploy Steps:**
1. Connect GitHub repo to Render
2. Use `backend/render.yaml` configuration
3. Deploy automatically on push

### Option 4: AWS ECS (Production Scale)

**Why AWS:**
- ✅ Ultimate scalability
- ✅ Full control
- ✅ Enterprise features
- ✅ Multi-region deployment

**Deploy Steps:**
```bash
# 1. Install AWS Copilot
curl -Lo copilot https://github.com/aws/copilot-cli/releases/latest/download/copilot-linux
chmod +x copilot && sudo mv copilot /usr/local/bin

# 2. Initialize application
copilot app init dexbrain
copilot env init --name production

# 3. Create service
copilot svc init --name api --svc-type "Backend Service"

# 4. Deploy
copilot svc deploy --name api --env production
```

## 🛠️ Environment Variables

Required for all deployments:

```bash
# API Configuration
API_HOST=0.0.0.0
API_PORT=8080
LOG_LEVEL=INFO

# Database (auto-generated by hosting platforms)
DATABASE_URL=postgresql://user:pass@host:5432/dexter
REDIS_URL=redis://host:6379

# API Settings
RATE_LIMIT_PER_MINUTE=100
DATA_QUALITY_THRESHOLD=60.0
MAX_AGENTS_PER_REQUEST=1000

# Performance
PARALLEL_WORKERS=4
CACHE_TTL=300
```

## 📊 Cost Estimates

### Starter Scale (1K agents)
- **Railway**: $5-15/month
- **DigitalOcean**: $12-25/month  
- **Render**: $7-20/month
- **AWS**: $15-30/month

### Growth Scale (10K agents)
- **Railway**: $25-50/month
- **DigitalOcean**: $50-100/month
- **Render**: $50-100/month  
- **AWS**: $30-80/month

### Enterprise Scale (100K+ agents)
- **AWS**: $200-500/month
- **DigitalOcean**: $300-600/month

## 🔧 Health Monitoring

All platforms include:
- ✅ Health check endpoint: `/health`
- ✅ Automatic restarts on failure
- ✅ CPU and memory monitoring
- ✅ Request/response logging

## 🌐 Custom Domain Setup

After deployment, configure:

```bash
# DNS Records (via Cloudflare/Route53)
api.dexteragent.com -> [hosting-platform-url]

# SSL Certificate (automatic on all platforms)
# Rate limiting (configure in hosting platform)
# CDN/caching (optional for static responses)
```

## 📈 Scaling Strategy

### Phase 1: MVP (Railway/DigitalOcean)
- Single instance
- Built-in databases
- Basic monitoring

### Phase 2: Growth (DigitalOcean/AWS)
- Auto-scaling
- Read replicas
- Enhanced monitoring

### Phase 3: Enterprise (AWS)
- Multi-region
- Load balancing
- Advanced caching

## 🚨 Monitoring & Alerts

Set up alerts for:
- API response time > 500ms
- Error rate > 5%
- Database connections > 80%
- Memory usage > 80%
- Agent registration failures

## 🔄 CI/CD Pipeline

Automatic deployment on:
- ✅ Push to `main` branch
- ✅ Health checks pass
- ✅ Database migrations complete
- ✅ Zero-downtime deployment

## 🛡️ Security

All deployments include:
- ✅ HTTPS/TLS encryption
- ✅ Environment variable encryption
- ✅ Network isolation
- ✅ Database connection pooling
- ✅ Rate limiting
- ✅ Request validation

## 🎯 Recommendation

**Start with Railway** for fastest deployment, then migrate to **DigitalOcean App Platform** for production scale. AWS for enterprise needs.

The API will be available at: `https://api.dexteragent.com`